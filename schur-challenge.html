<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Schur Decomposition Challenge</title>
    <!-- MathJax for mathematical notation -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" async></script>
  </head>
  <body>
    <div id="app">
      <header>
        <h1>Schur Decomposition Challenge</h1>
        <p class="subtitle" id="subtitle">Find Invariant Subspaces • Master Block Diagonalization • Discover the Structure</p>
      </header>
      <div class="game-container">
        <div class="about">
          <p>
            <strong>The Challenge:</strong> A curve is rotating in $\mathbb{R}^n$ according to a skew-symmetric matrix $K$.
            The curve is displayed as $Q^T e^{tK} x$ where $t$ varies automatically over time.
            Your goal is to choose the orthogonal matrix $Q \in \text{SO}(n)$ such that $Q^T K Q$ becomes block diagonal,
            revealing the invariant subspaces of the rotation.
          </p>
          <p>
            <strong>Mathematical Setup:</strong> Given a skew-symmetric matrix $K$ (where $K^T = -K$), the matrix exponential
            $e^{tK}$ generates a rotation flow. For skew-symmetric matrices, there exist orthogonal bases where $K$ decomposes
            into $2 \times 2$ rotation blocks (and possibly $1 \times 1$ zero blocks). This is the real Schur decomposition.
            You control $Q$ by applying incremental rotations, and watch how the animated curve behaves. When $Q$ is aligned
            with the Schur basis, the motion becomes "decoupled" into independent rotations in orthogonal planes.
          </p>
          <p>
            <strong>Block Structure Goals:</strong><br>
            • <strong>2D:</strong> Already fully decoupled (one 2D rotation plane)<br>
            • <strong>3D:</strong> Find basis where dims [1,2] rotate together and dim [3] is fixed<br>
            • <strong>4D:</strong> Find basis where dims [1,2] and dims [3,4] rotate independently<br>
            • <strong>5D:</strong> Find basis where dims [1,2] and dims [3,4] rotate independently, dim [5] fixed
          </p>
          <p>
            <strong>Controls:</strong> Click and hold any off-diagonal cell $(i,j)$ to continuously rotate in that plane.
            Watch how the animated curve moves. When you've found the right basis, the curve motion will appear
            "organized" with clear independent rotations. The score shows how far your current $Q^T K Q$ is from
            being block diagonal.
          </p>
          <p>
            <a href="rotation-challenge.html">← Rotation Challenge</a> |
            <a href="index.html">Turkey Hunt</a>
          </p>
        </div>
        <div class="controls-section">
          <div class="section-title">Challenge Controls</div>
          <div class="divider"></div>
          <div class="goal-callout"><strong>Goal:</strong> Minimize the off-block-diagonal norm to reveal invariant subspaces</div>
          <div class="instructions instructions-top">
            <p><strong>Rotate:</strong> Hold on any off-diagonal cell (i, j) to rotate in that plane</p>
            <p><strong>New Puzzle:</strong> Click "New Challenge" for a fresh skew-symmetric matrix</p>
          </div>
          <div class="dimension-selector">
            <label for="dimension-select">Dimensions:</label>
            <select id="dimension-select">
              <option value="2">2D</option>
              <option value="3">3D</option>
              <option value="4" selected>4D</option>
              <option value="5">5D</option>
            </select>
          </div>
        </div>

        <div class="controls">
          <button id="new-challenge-button">New Challenge</button>
        </div>

        <div class="play-area">
          <canvas id="game-canvas"></canvas>

          <div class="info-panel">
            <div class="stat">
              <span class="label">Off-Block Norm:</span>
              <span id="alignment-score">—</span>
            </div>
            <div class="stat">
              <span class="label">Best Score:</span>
              <span id="best-score">—</span>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="version-info">
          Build: <span id="git-hash">loading...</span>
        </div>
      </footer>
    </div>
    <div id="scroll-hint" class="scroll-hint">
      <div class="hint-text">Scroll to Play</div>
      <div class="chevrons" aria-hidden="true">
        <svg width="20" height="20" viewBox="0 0 24 24">
          <path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <svg width="20" height="20" viewBox="0 0 24 24">
          <path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
    <script type="module" src="/src/schur-challenge-main.js"></script>
  </body>
</html>
